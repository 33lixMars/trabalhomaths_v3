<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Sucess√£o Geom√©trica - Trabalho de Matem√°tica 11¬∫ Inforgest</title>
</head>
<body>
    <nav class="nav-bar" aria-label="Main navigation">
        <div class="nav-inner">
            <a class="brand" href="./maths.html">Calculadora</a>
            <button class="nav-toggle" aria-expanded="false" aria-label="Open menu">
                <span class="hamburger"></span>
            </button>
            <ul class="nav-links" role="menubar">
                <li role="none"><a role="menuitem" href="maths.html">Cient√≠fica</a></li>
                <li role="none"><a role="menuitem" href="financeira.html">Financeira</a></li>
                <li class="dropdown" role="none">
                    <button class="drop-btn" aria-haspopup="true" aria-expanded="false">An√°lise de Balan√ßo ‚ñæ</button>
                    <ul class="dropdown-menu" role="menu">
                        <li role="none"><a role="menuitem" href="b-patrimonial.html">Balan√ßo Patrimonial</a></li>
                        <li role="none"><a role="menuitem" href="b-sintetico.html">Balan√ßo Sint√©tico</a></li>
                        <li role="none"><a role="menuitem" href="b-analitico.html">Balan√ßo Anal√≠tico</a></li>
                    </ul>
                </li>
                <li class="dropdown" role="none">
                    <button class="drop-btn" aria-haspopup="true" aria-expanded="false">Sucess√µes ‚ñæ</button>
                    <ul class="dropdown-menu" role="menu">
                        <li role="none"><a role="menuitem" href="s-geometrica.html">Geom√©trica (PG)</a></li>
                        <li role="none"><a role="menuitem" href="s-aritmetica.html">Aritm√©tica (PA)</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </nav>

    <div class="sucessoes-container">
        <h2 class="balanco-title">Progress√£o Geom√©trica (PG)</h2>
        
        <div class="form-group">
            <label>Selecione o que deseja calcular:</label>
            <select id="modoPG" onchange="mudarModoPG()">
                <option value="termo_soma">Calcular a‚Çô e S‚Çô (f√≥rmula: a‚Çô = a‚ÇÅ √ó q^(n-1))</option>
                <option value="razao">Calcular raz√£o q (f√≥rmula: q = ‚Åø‚Åª¬π‚àö(a‚Çô/a‚ÇÅ))</option>
                <option value="primeiro_termo">Calcular a‚ÇÅ (f√≥rmula: a‚ÇÅ = a‚Çô / q^(n-1))</option>
                <option value="posicao">Calcular n (f√≥rmula: n = log(a‚Çô/a‚ÇÅ)/log(q) + 1)</option>
            </select>
        </div>

        <!-- Modo: Calcular termo e soma -->
        <div id="modo-termo_soma" class="modo-calculo">
            <h3 style="color: #667eea; margin-bottom: 20px;">Calcular Termo n e Soma</h3>
            <div class="form-group">
                <label>Primeiro Termo (a‚ÇÅ):</label>
                <input type="number" id="a1_ts" placeholder="Ex: 2" step="any">
            </div>
            <div class="form-group">
                <label>Raz√£o (q):</label>
                <input type="number" id="q_ts" placeholder="Ex: 3" step="any">
            </div>
            <div class="form-group">
                <label>N√∫mero de Termos (n):</label>
                <input type="number" id="n_ts" placeholder="Ex: 8">
            </div>
            <button class="btn-calcular" onclick="calcularPG_TermoSoma()">Calcular</button>
        </div>

        <!-- Modo: Calcular raz√£o -->
        <div id="modo-razao" class="modo-calculo" style="display: none;">
            <h3 style="color: #667eea; margin-bottom: 20px;">Calcular Raz√£o q</h3>
            <div class="form-group">
                <label>Primeiro Termo (a‚ÇÅ):</label>
                <input type="number" id="a1_r" placeholder="Ex: 2" step="any">
            </div>
            <div class="form-group">
                <label>Termo na posi√ß√£o n (a‚Çô):</label>
                <input type="number" id="an_r" placeholder="Ex: 1458" step="any">
            </div>
            <div class="form-group">
                <label>Posi√ß√£o do termo (n):</label>
                <input type="number" id="n_r" placeholder="Ex: 6">
            </div>
            <button class="btn-calcular" onclick="calcularPG_Razao()">Calcular Raz√£o</button>
        </div>

        <!-- Modo: Calcular primeiro termo -->
        <div id="modo-primeiro_termo" class="modo-calculo" style="display: none;">
            <h3 style="color: #667eea; margin-bottom: 20px;">Calcular Primeiro Termo a‚ÇÅ</h3>
            <div class="form-group">
                <label>Termo na posi√ß√£o n (a‚Çô):</label>
                <input type="number" id="an_pt" placeholder="Ex: 1458" step="any">
            </div>
            <div class="form-group">
                <label>Raz√£o (q):</label>
                <input type="number" id="q_pt" placeholder="Ex: 3" step="any">
            </div>
            <div class="form-group">
                <label>Posi√ß√£o do termo (n):</label>
                <input type="number" id="n_pt" placeholder="Ex: 6">
            </div>
            <button class="btn-calcular" onclick="calcularPG_PrimeiroTermo()">Calcular Primeiro Termo</button>
        </div>

        <!-- Modo: Calcular posi√ß√£o -->
        <div id="modo-posicao" class="modo-calculo" style="display: none;">
            <h3 style="color: #667eea; margin-bottom: 20px;">Calcular Posi√ß√£o n</h3>
            <div class="form-group">
                <label>Primeiro Termo (a‚ÇÅ):</label>
                <input type="number" id="a1_p" placeholder="Ex: 2" step="any">
            </div>
            <div class="form-group">
                <label>Termo procurado (a‚Çô):</label>
                <input type="number" id="an_p" placeholder="Ex: 1458" step="any">
            </div>
            <div class="form-group">
                <label>Raz√£o (q):</label>
                <input type="number" id="q_p" placeholder="Ex: 3" step="any">
            </div>
            <button class="btn-calcular" onclick="calcularPG_Posicao()">Calcular Posi√ß√£o</button>
        </div>
        
        <div id="resultPG" class="result-box"></div>
    </div>

    <div class="calculator-about">
        <div class="calculator-about_wrapper">
            <h2>O que √© uma Progress√£o Geom√©trica?</h2>
            
            <p>Uma <strong>Progress√£o Geom√©trica (PG)</strong> √© uma sequ√™ncia num√©rica em que cada termo, a partir do segundo, √© obtido multiplicando o termo anterior por uma constante chamada <strong>raz√£o (q)</strong>.</p>
            
            <h3 style="margin-top: 25px;">F√≥rmulas Importantes</h3>
            
            <p><strong>Termo Geral:</strong><br>
            a‚Çô = a‚ÇÅ √ó q^(n-1)<br>
            Onde:<br>
            ‚Ä¢ a‚Çô = termo que queremos encontrar<br>
            ‚Ä¢ a‚ÇÅ = primeiro termo<br>
            ‚Ä¢ q = raz√£o<br>
            ‚Ä¢ n = posi√ß√£o do termo
            </p>
            
            <p><strong>Soma dos n primeiros termos:</strong><br>
            Quando q ‚â† 1: S‚Çô = a‚ÇÅ √ó (q^n - 1) / (q - 1)<br>
            Quando q = 1: S‚Çô = n √ó a‚ÇÅ
            </p>
            
            <h3 style="margin-top: 25px;">Exemplos</h3>
            
            <p><strong>Exemplo 1:</strong> PG (2, 6, 18, 54, ...)<br>
            ‚Ä¢ Primeiro termo: a‚ÇÅ = 2<br>
            ‚Ä¢ Raz√£o: q = 3 (6/2 = 3)<br>
            ‚Ä¢ 5¬∫ termo: a‚ÇÖ = 2 √ó 3‚Å¥ = 2 √ó 81 = 162
            </p>
            
            <p><strong>Exemplo 2:</strong> PG (100, 50, 25, 12.5, ...)<br>
            ‚Ä¢ Primeiro termo: a‚ÇÅ = 100<br>
            ‚Ä¢ Raz√£o: q = 0.5 (50/100 = 0.5)<br>
            ‚Ä¢ Esta √© uma PG decrescente
            </p>
            
            <h3 style="margin-top: 25px;">Tipos de PG</h3>
            
            <p><strong>PG Crescente:</strong> q > 1 (os termos aumentam)<br>
            Exemplo: 2, 4, 8, 16, 32...
            </p>
            
            <p><strong>PG Decrescente:</strong> 0 < q < 1 (os termos diminuem)<br>
            Exemplo: 100, 50, 25, 12.5...
            </p>
            
            <p><strong>PG Constante:</strong> q = 1 (todos os termos s√£o iguais)<br>
            Exemplo: 5, 5, 5, 5...
            </p>
            
            <p><strong>PG Oscilante:</strong> q < 0 (os termos alternam sinais)<br>
            Exemplo: 3, -6, 12, -24...
            </p>
        </div>
    </div>

    <footer>&copy; 2025 Grupo N¬∫1 Inforgest - Trabalho de Matem√°tica</footer>

    <script src="nav.js"></script>
    <script>
        function mudarModoPG() {
            const modo = document.getElementById('modoPG').value;
            document.querySelectorAll('.modo-calculo').forEach(m => m.style.display = 'none');
            document.getElementById('modo-' + modo).style.display = 'block';
            document.getElementById('resultPG').className = 'result-box';
        }

        function calcularPG_TermoSoma() {
            const a1 = parseFloat(document.getElementById('a1_ts').value);
            const q = parseFloat(document.getElementById('q_ts').value);
            const n = parseInt(document.getElementById('n_ts').value);
            
            if (isNaN(a1) || isNaN(q) || isNaN(n)) {
                alert('Por favor, preencha todos os campos');
                return;
            }
            
            if (n <= 0) {
                alert('O n√∫mero de termos deve ser maior que zero');
                return;
            }
            
            const an = a1 * Math.pow(q, n - 1);
            let soma;
            if (q === 1) {
                soma = n * a1;
            } else {
                soma = a1 * (Math.pow(q, n) - 1) / (q - 1);
            }
            
            let termos = [];
            for (let i = 0; i < Math.min(n, 15); i++) {
                termos.push((a1 * Math.pow(q, i)).toFixed(4));
            }
            
            let tipoPG;
            if (q > 1) tipoPG = 'Crescente';
            else if (q === 1) tipoPG = 'Constante';
            else if (q > 0 && q < 1) tipoPG = 'Decrescente';
            else if (q < 0) tipoPG = 'Oscilante';
            else tipoPG = 'Indefinida';
            
            mostrarResultadoPG({
                titulo: 'C√°lculo do Termo e Soma',
                dados: [
                    `Primeiro termo (a‚ÇÅ): ${a1}`,
                    `Raz√£o (q): ${q}`,
                    `N√∫mero de termos (n): ${n}`,
                    `Tipo de PG: ${tipoPG}`
                ],
                resultados: [
                    `√öltimo termo (a${n}): ${an.toFixed(4)}`,
                    `Soma dos ${n} termos (S‚Çô): ${soma.toFixed(4)}`
                ],
                termos: termos,
                n: n,
                formula: `a‚Çô = a‚ÇÅ √ó q^(n-1)`,
                explicacao: `
                    <div style="background: #e7f3ff; padding: 15px; border-radius: 8px; margin-top: 15px;">
                        <h4 style="color: #0066cc; margin-bottom: 10px;">Explica√ß√£o do C√°lculo:</h4>
                        
                        <p><strong>1. C√°lculo do termo a‚Çô:</strong></p>
                        <p style="font-family: monospace; margin-left: 20px;">
                            a‚Çô = a‚ÇÅ √ó q^(n-1)<br>
                            a${n} = ${a1} √ó ${q}^(${n}-1)<br>
                            a${n} = ${a1} √ó ${q}^${n-1}<br>
                            a${n} = ${a1} √ó ${Math.pow(q, n-1).toFixed(6)}<br>
                            a${n} = ${an.toFixed(4)}
                        </p>
                        
                        <p style="margin-top: 10px;"><strong>2. C√°lculo da soma S‚Çô:</strong></p>
                        ${q !== 1 ? `
                            <p style="font-family: monospace; margin-left: 20px;">
                                S‚Çô = a‚ÇÅ √ó (q^n - 1) / (q - 1)<br>
                                S${n} = ${a1} √ó (${q}^${n} - 1) / (${q} - 1)<br>
                                S${n} = ${a1} √ó (${Math.pow(q, n).toFixed(6)} - 1) / ${(q - 1).toFixed(4)}<br>
                                S${n} = ${a1} √ó ${(Math.pow(q, n) - 1).toFixed(6)} / ${(q - 1).toFixed(4)}<br>
                                S${n} = ${soma.toFixed(4)}
                            </p>
                        ` : `
                            <p style="margin-left: 20px;">Como q = 1 (PG constante), todos os termos s√£o iguais a ${a1}.</p>
                            <p style="font-family: monospace; margin-left: 20px;">
                                S‚Çô = n √ó a‚ÇÅ<br>
                                S${n} = ${n} √ó ${a1}<br>
                                S${n} = ${soma.toFixed(4)}
                            </p>
                        `}
                        
                        <p style="margin-top: 10px;"><strong>3. Caracter√≠sticas desta PG:</strong></p>
                        <p style="margin-left: 20px;">
                            ‚Ä¢ Tipo: <strong>${tipoPG}</strong><br>
                            ${q > 1 ? '‚Ä¢ Os termos aumentam progressivamente (cada termo √© maior que o anterior)' : ''}
                            ${q === 1 ? '‚Ä¢ Todos os termos s√£o iguais' : ''}
                            ${q > 0 && q < 1 ? '‚Ä¢ Os termos diminuem progressivamente (cada termo √© menor que o anterior)' : ''}
                            ${q < 0 ? '‚Ä¢ Os termos alternam entre positivos e negativos' : ''}
                        </p>
                    </div>
                `
            });
        }

        function calcularPG_Razao() {
            const a1 = parseFloat(document.getElementById('a1_r').value);
            const an = parseFloat(document.getElementById('an_r').value);
            const n = parseInt(document.getElementById('n_r').value);
            
            if (isNaN(a1) || isNaN(an) || isNaN(n)) {
                alert('Por favor, preencha todos os campos');
                return;
            }
            
            if (n <= 1) {
                alert('A posi√ß√£o n deve ser maior que 1');
                return;
            }
            
            if (a1 === 0) {
                alert('O primeiro termo n√£o pode ser zero');
                return;
            }
            
            // Verifica se os sinais s√£o compat√≠veis
            if ((a1 > 0 && an < 0) || (a1 < 0 && an > 0)) {
                if ((n - 1) % 2 === 0) {
                    alert('Com estes valores e n √≠mpar, a raz√£o seria negativa elevada a expoente par, resultando em valor positivo. Verifique os dados.');
                }
            }
            
            // Calcula q = (an/a1)^(1/(n-1))
            const razao = an / a1;
            const expoente = 1 / (n - 1);
            let q;
            
            if (razao < 0 && (n - 1) % 2 === 0) {
                alert('N√£o √© poss√≠vel calcular raiz de √≠ndice par de n√∫mero negativo nos reais');
                return;
            }
            
            if (razao < 0) {
                // Raiz de √≠ndice √≠mpar de n√∫mero negativo
                q = -Math.pow(Math.abs(razao), expoente);
            } else {
                q = Math.pow(razao, expoente);
            }
            
            const soma = q === 1 ? n * a1 : a1 * (Math.pow(q, n) - 1) / (q - 1);
            
            let termos = [];
            for (let i = 0; i < Math.min(n, 10); i++) {
                termos.push((a1 * Math.pow(q, i)).toFixed(4));
            }
            
            const verificacao = a1 * Math.pow(q, n - 1);
            const erro = Math.abs(verificacao - an);
            
            mostrarResultadoPG({
                titulo: 'C√°lculo da Raz√£o',
                dados: [
                    `Primeiro termo (a‚ÇÅ): ${a1}`,
                    `Termo na posi√ß√£o ${n} (a${n}): ${an}`,
                    `Posi√ß√£o: ${n}`
                ],
                resultados: [
                    `Raz√£o calculada (q): ${q.toFixed(6)}`,
                    `Verifica√ß√£o: a${n} = ${a1} √ó ${q.toFixed(6)}^${n-1} = ${verificacao.toFixed(4)}`,
                    `Diferen√ßa: ${erro < 0.0001 ? 'Desprez√≠vel (< 0.0001)' : erro.toFixed(6)}`,
                    `Soma dos ${n} termos: ${soma.toFixed(4)}`
                ],
                termos: termos,
                n: n,
                formula: `q = ‚Åø‚Åª¬π‚àö(a‚Çô/a‚ÇÅ)`,
                explicacao: `
                    <div style="background: #e7f3ff; padding: 15px; border-radius: 8px; margin-top: 15px;">
                        <h4 style="color: #0066cc; margin-bottom: 10px;">üìö Explica√ß√£o do C√°lculo:</h4>
                        
                        <p><strong>1. F√≥rmula do termo geral da PG:</strong></p>
                        <p style="font-family: monospace; margin-left: 20px;">a‚Çô = a‚ÇÅ √ó q^(n-1)</p>
                        
                        <p style="margin-top: 10px;"><strong>2. Isolando q:</strong></p>
                        <p style="font-family: monospace; margin-left: 20px;">
                            a‚Çô = a‚ÇÅ √ó q^(n-1)<br>
                            a‚Çô/a‚ÇÅ = q^(n-1)<br>
                            q = ‚Åø‚Åª¬π‚àö(a‚Çô/a‚ÇÅ)
                        </p>
                        
                        <p style="margin-top: 10px;"><strong>3. Substituindo os valores:</strong></p>
                        <p style="font-family: monospace; margin-left: 20px;">
                            q = ${n-1}‚àö(${an}/${a1})<br>
                            q = ${n-1}‚àö(${razao.toFixed(4)})<br>
                            q = (${razao.toFixed(4)})^(1/${n-1})<br>
                            q = (${razao.toFixed(4)})^${expoente.toFixed(6)}<br>
                            q = ${q.toFixed(6)}
                        </p>
                        
                        <p style="margin-top: 10px;"><strong>4. Verifica√ß√£o:</strong></p>
                        <p style="font-family: monospace; margin-left: 20px;">
                            Calculando a${n} = a‚ÇÅ √ó q^(${n}-1):<br>
                            a${n} = ${a1} √ó ${q.toFixed(6)}^${n-1}<br>
                            a${n} = ${a1} √ó ${Math.pow(q, n-1).toFixed(6)}<br>
                            a${n} = ${verificacao.toFixed(6)}<br>
                            <br>
                            Valor esperado: ${an}<br>
                            Valor calculado: ${verificacao.toFixed(6)}<br>
                            Diferen√ßa: ${erro < 0.0001 ? '‚úì Desprez√≠vel!' : erro.toFixed(6)}
                        </p>
                        
                        <p style="margin-top: 10px;"><strong>5. Interpreta√ß√£o:</strong></p>
                        <p style="margin-left: 20px;">
                            Com raz√£o q = ${q.toFixed(6)}, cada termo da PG √© obtido multiplicando o anterior por ${q.toFixed(6)}.
                        </p>
                    </div>
                `
            });
        }

        function calcularPG_PrimeiroTermo() {
            const an = parseFloat(document.getElementById('an_pt').value);
            const q = parseFloat(document.getElementById('q_pt').value);
            const n = parseInt(document.getElementById('n_pt').value);
            
            if (isNaN(an) || isNaN(q) || isNaN(n)) {
                alert('Por favor, preencha todos os campos');
                return;
            }
            
            if (n <= 0) {
                alert('A posi√ß√£o n deve ser maior que zero');
                return;
            }
            
            if (q === 0) {
                alert('A raz√£o n√£o pode ser zero');
                return;
            }
            
            // Calcula a1 = an / q^(n-1)
            const expoente = n - 1;
            const a1 = an / Math.pow(q, expoente);
            
            const soma = q === 1 ? n * a1 : a1 * (Math.pow(q, n) - 1) / (q - 1);
            
            let termos = [];
            for (let i = 0; i < Math.min(n, 10); i++) {
                termos.push((a1 * Math.pow(q, i)).toFixed(4));
            }
            
            // Verifica√ß√£o
            const verificacao = a1 * Math.pow(q, n - 1);
            const erro = Math.abs(verificacao - an);
            
            mostrarResultadoPG({
                titulo: 'C√°lculo do Primeiro Termo',
                dados: [
                    `Termo na posi√ß√£o ${n} (a${n}): ${an}`,
                    `Raz√£o (q): ${q}`,
                    `Posi√ß√£o: ${n}`
                ],
                resultados: [
                    `Primeiro termo calculado (a‚ÇÅ): ${a1.toFixed(6)}`,
                    `Verifica√ß√£o: a${n} = ${a1.toFixed(6)} √ó ${q}^${n-1} = ${verificacao.toFixed(6)}`,
                    `Diferen√ßa: ${erro < 0.0001 ? 'Desprez√≠vel (< 0.0001)' : erro.toFixed(6)}`,
                    `Soma dos ${n} termos: ${soma.toFixed(4)}`
                ],
                termos: termos,
                n: n,
                formula: `a‚ÇÅ = a‚Çô / q^(n-1) = ${an} / ${q}^${n-1} = ${an} / ${Math.pow(q, n-1).toFixed(4)}`,
                explicacao: `
                    <div style="background: #e7f3ff; padding: 15px; border-radius: 8px; margin-top: 15px;">
                        <h4 style="color: #0066cc; margin-bottom: 10px;">Explica√ß√£o do C√°lculo:</h4>
                        <p><strong>1. F√≥rmula do termo geral da PG:</strong></p>
                        <p style="font-family: monospace; margin-left: 20px;">a‚Çô = a‚ÇÅ √ó q^(n-1)</p>
                        
                        <p style="margin-top: 10px;"><strong>2. Isolando a‚ÇÅ:</strong></p>
                        <p style="font-family: monospace; margin-left: 20px;">a‚ÇÅ = a‚Çô / q^(n-1)</p>
                        
                        <p style="margin-top: 10px;"><strong>3. Substituindo os valores:</strong></p>
                        <p style="font-family: monospace; margin-left: 20px;">
                            a‚ÇÅ = ${an} / ${q}^(${n}-1)<br>
                            a‚ÇÅ = ${an} / ${q}^${n-1}<br>
                            a‚ÇÅ = ${an} / ${Math.pow(q, n-1).toFixed(4)}<br>
                            a‚ÇÅ = ${a1.toFixed(6)}
                        </p>
                        
                        <p style="margin-top: 10px;"><strong>4. Verifica√ß√£o (calculando a‚Çô novamente):</strong></p>
                        <p style="font-family: monospace; margin-left: 20px;">
                            a${n} = ${a1.toFixed(6)} √ó ${q}^${n-1}<br>
                            a${n} = ${a1.toFixed(6)} √ó ${Math.pow(q, n-1).toFixed(4)}<br>
                            a${n} = ${verificacao.toFixed(6)} ‚úì
                        </p>
                    </div>
                `
            });
        }

        function calcularPG_Posicao() {
            const a1 = parseFloat(document.getElementById('a1_p').value);
            const an = parseFloat(document.getElementById('an_p').value);
            const q = parseFloat(document.getElementById('q_p').value);
            
            if (isNaN(a1) || isNaN(an) || isNaN(q)) {
                alert('Por favor, preencha todos os campos');
                return;
            }
            
            if (a1 === 0) {
                alert('O primeiro termo n√£o pode ser zero');
                return;
            }
            
            if (q === 0) {
                alert('A raz√£o n√£o pode ser zero');
                return;
            }
            
            if (q === 1) {
                if (a1 === an) {
                    alert('Em uma PG constante (q=1), todos os termos s√£o iguais a ' + a1);
                } else {
                    alert('Com q=1, todos os termos devem ser iguais. N√£o existe posi√ß√£o v√°lida para a‚Çô=' + an);
                }
                return;
            }
            
            // n = log(an/a1) / log(q) + 1
            const razao = an / a1;
            
            if (razao <= 0) {
                alert('Para este c√°lculo, a‚Çô/a‚ÇÅ deve ser positivo');
                return;
            }
            
            if (q < 0) {
                alert('Para este c√°lculo com logaritmos, q deve ser positivo e diferente de 1');
                return;
            }
            
            const logRazao = Math.log(razao);
            const logQ = Math.log(q);
            const n = logRazao / logQ + 1;
            
            if (n < 1 || !isFinite(n)) {
                alert('N√£o foi poss√≠vel calcular uma posi√ß√£o v√°lida com estes valores');
                return;
            }
            
            const nInteiro = Math.round(n);
            const verificacao = a1 * Math.pow(q, nInteiro - 1);
            const erro = Math.abs(verificacao - an);
            const percErro = (erro / an) * 100;
            
            mostrarResultadoPG({
                titulo: 'C√°lculo da Posi√ß√£o',
                dados: [
                    `Primeiro termo (a‚ÇÅ): ${a1}`,
                    `Termo procurado (a‚Çô): ${an}`,
                    `Raz√£o (q): ${q}`
                ],
                resultados: [
                    `Posi√ß√£o calculada (n): ${n.toFixed(4)}`,
                    `Posi√ß√£o aproximada (inteiro): ${nInteiro}`,
                    `<span style="color: ${erro < 0.01 ? '#28a745' : '#dc3545'};">Verifica√ß√£o: O termo na posi√ß√£o ${nInteiro} vale ${verificacao.toFixed(6)}</span>`,
                    `Diferen√ßa absoluta: ${erro.toFixed(6)} (${percErro < 0.01 ? '<0.01' : percErro.toFixed(2)}%)`
                ],
                termos: [],
                n: nInteiro,
                formula: `n = log(a‚Çô/a‚ÇÅ) / log(q) + 1`,
                explicacao: `
                    <div style="background: #e7f3ff; padding: 15px; border-radius: 8px; margin-top: 15px;">
                        <h4 style="color: #0066cc; margin-bottom: 10px;">Explica√ß√£o do C√°lculo:</h4>
                        
                        <p><strong>1. F√≥rmula do termo geral da PG:</strong></p>
                        <p style="font-family: monospace; margin-left: 20px;">a‚Çô = a‚ÇÅ √ó q^(n-1)</p>
                        
                        <p style="margin-top: 10px;"><strong>2. Isolando n (aplicando logaritmo):</strong></p>
                        <p style="font-family: monospace; margin-left: 20px;">
                            a‚Çô = a‚ÇÅ √ó q^(n-1)<br>
                            a‚Çô/a‚ÇÅ = q^(n-1)<br>
                            log(a‚Çô/a‚ÇÅ) = log(q^(n-1))<br>
                            log(a‚Çô/a‚ÇÅ) = (n-1) √ó log(q)<br>
                            n-1 = log(a‚Çô/a‚ÇÅ) / log(q)<br>
                            n = log(a‚Çô/a‚ÇÅ) / log(q) + 1
                        </p>
                        
                        <p style="margin-top: 10px;"><strong>3. Substituindo os valores:</strong></p>
                        <p style="font-family: monospace; margin-left: 20px;">
                            n = log(${an}/${a1}) / log(${q}) + 1<br>
                            n = log(${razao.toFixed(4)}) / log(${q}) + 1<br>
                            n = ${logRazao.toFixed(6)} / ${logQ.toFixed(6)} + 1<br>
                            n = ${(logRazao/logQ).toFixed(6)} + 1<br>
                            n = ${n.toFixed(6)}
                        </p>
                        
                        <p style="margin-top: 10px;"><strong>4. Interpreta√ß√£o do resultado:</strong></p>
                        <p style="margin-left: 20px;">
                            ${Math.abs(n - nInteiro) < 0.001 ? 
                                `O valor ${an} est√° <strong>exatamente</strong> na posi√ß√£o ${nInteiro} da progress√£o.` :
                                `O valor ${an} est√° <strong>entre</strong> as posi√ß√µes ${Math.floor(n)} e ${Math.ceil(n)}.<br>
                                A posi√ß√£o mais pr√≥xima √© ${nInteiro}, onde o termo vale ${verificacao.toFixed(6)}.`
                            }
                        </p>
                        
                        <p style="margin-top: 10px;"><strong>5. Verifica√ß√£o:</strong></p>
                        <p style="font-family: monospace; margin-left: 20px;">
                            Calculando a${nInteiro} = a‚ÇÅ √ó q^(${nInteiro}-1):<br>
                            a${nInteiro} = ${a1} √ó ${q}^${nInteiro-1}<br>
                            a${nInteiro} = ${a1} √ó ${Math.pow(q, nInteiro-1).toFixed(6)}<br>
                            a${nInteiro} = ${verificacao.toFixed(6)}<br>
                            <br>
                            Comparando com o valor procurado:<br>
                            Procurado: ${an}<br>
                            Encontrado: ${verificacao.toFixed(6)}<br>
                            Erro: ${erro < 0.0001 ? 'Praticamente zero!' : erro.toFixed(6) + ' (' + (percErro < 0.01 ? '<0.01' : percErro.toFixed(2)) + '%)'}
                        </p>
                    </div>
                `
            });
        }

        function mostrarResultadoPG(dados) {
            const result = document.getElementById('resultPG');
            result.className = 'result-box show';
            result.innerHTML = `
                <h3>${dados.titulo}</h3>
                ${dados.dados.map(d => `<p><strong>${d}</strong></p>`).join('')}
                <hr style="margin: 15px 0; border: none; border-top: 1px solid #ddd;">
                ${dados.resultados.map(r => `<p style="font-size: 18px; color: #667eea;"><strong>${r}</strong></p>`).join('')}
                ${dados.termos.length > 0 ? `
                    <hr style="margin: 15px 0; border: none; border-top: 1px solid #ddd;">
                    <p><strong>Primeiros ${Math.min(dados.n, 10)} termos:</strong></p>
                    <p style="background: #f0f0f0; padding: 10px; border-radius: 5px; font-family: monospace;">
                        ${dados.termos.join(', ')}${dados.n > 15 ? '...' : ''}
                    </p>
                ` : ''}
                <hr style="margin: 15px 0; border: none; border-top: 1px solid #ddd;">
                <p><strong>F√≥rmula utilizada:</strong><br>${dados.formula}</p>
                ${dados.explicacao || ''}
            `;
        }
    </script>
</body>
</html>
